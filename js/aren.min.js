!function(a){function e(s,l,o){var c=l.children("ul"),i=l.children("a");c.length>0&&(c.addClass(s.cssClass.subMenu),l.addClass(s.cssClass.parent),c.is(":visible")?l.addClass(s.cssClass.expanded):l.addClass(s.cssClass.collapsed),i.after(s.markup.expander.replace("%s",s.cssClass.expander)),n(s.cssClass,l),c.children("li").each(function(){e(s,a(this),++o)}))}function n(a,e){var n=e.children("ul"),s=e.children("a");n.length>0&&s.outerHeight()>0&&e.children("."+a.expander).height(s.outerHeight())}function s(a,e){var n=e.siblings("ul"),s=e.parent();n.is(":visible")?s.removeClass(a.expanded).addClass(a.collapsed):s.removeClass(a.collapsed).addClass(a.expanded)}function l(e,n){var s=n.siblings("ul"),l=s.parent();s.is(":visible")?(l.removeClass(e.expanded).addClass(e.collapsed),s.find("."+e.expanded).removeClass(e.expanded).addClass(e.collapsed)):(l.removeClass(e.collapsed).addClass(e.expanded),l.siblings("."+e.expanded).each(function(n,s){a(s).removeClass(e.expanded).addClass(e.collapsed).find("."+e.expanded).removeClass(e.expanded).addClass(e.collapsed)}))}function o(a,e){return a.find("."+e.cssClass.breakout).width()}function c(a,e,n){n||(n="Don't call this twice without a uniqueId"),i[n]&&clearTimeout(i[n]),i[n]=setTimeout(a,e)}var i={},t={init:function(i){var t={cssClass:{nav:"aren-nav",expander:"aren-expander",showNav:"aren-nav-show",collapsed:"aren-nav-collapsed",expanded:"aren-nav-expanded",parent:"aren-nav-parent",breakout:"aren-breakout",toggle:"aren-nav-toggle",toggleActive:"aren-toggle-active",subMenu:"aren-sub-menu"},markup:{expander:'<span tabindex="0" class="%s"></span>',breakout:'<div class="%s"></div>'},breakout:[{callback:{onResize:function(e,s){s.children("ul").children("li").each(function(){n(e,a(this),0)})},onDocumentClick:function(){},onNavClick:function(a){a.stopPropagation()},onExpanderClick:function(a,e,n){s(e,n)},onExpanderKeyDown:function(a,e,n){a=a||window.event;var l=a.keyCode;(13===l||32==l)&&s(e,n)},onToggleClick:function(e,s,l){var o=a(l.data("target"));o.hasClass(s.showNav)?o.removeClass(s.showNav):(o.addClass(s.showNav),o.children("ul").children("li").each(function(){n(i.cssClass,a(this),0)})),l.toggleClass(s.toggleActive)}}},{callback:{onResize:function(e,s){s.children("ul").children("li").each(function(){n(e,a(this),0)})},onDocumentClick:function(e,n){a("."+n.expanded).removeClass(n.expanded)},onNavClick:function(a){a.stopPropagation()},onExpanderClick:function(a,e,n){l(e,n)},onExpanderKeyDown:function(a,e,n){a=a||window.event;var s=a.keyCode;(13===s||32===s)&&l(e,n)},onToggleClick:function(){}}}]};return i=a.extend(!0,{},t,i),this.each(function(){var n=a(this);n.addClass(i.cssClass.nav),n.children("ul").children("li").each(function(){e(i,a(this),0)}),n.append(i.markup.breakout.replace("%s",i.cssClass.breakout)),a(document).on("click",function(e){i.breakout[a.fn.arenBreakout].callback.onDocumentClick(e,i.cssClass)}).on("click","."+i.cssClass.nav,function(e){i.breakout[a.fn.arenBreakout].callback.onNavClick(e,i.cssClass)}).on("click","."+i.cssClass.expander,function(e){i.breakout[a.fn.arenBreakout].callback.onExpanderClick(e,i.cssClass,a(this))}).on("keydown","."+i.cssClass.expander,function(e){i.breakout[a.fn.arenBreakout].callback.onExpanderKeyDown(e,i.cssClass,a(this))}).on("click","."+i.cssClass.toggle,function(e){i.breakout[a.fn.arenBreakout].callback.onToggleClick(e,i.cssClass,a(this))}),a(window).on("resize",function(){c(function(){a.fn.arenBreakout=o(n,i),i.breakout[a.fn.arenBreakout].callback.onResize(i.cssClass,n)},100,"aren")}),a.fn.arenBreakout=o(n,i)})}};a.fn.aren=function(a){return t[a]?t[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?!1:t.init.apply(this,arguments)},a.fn.arenBreakout=0}(jQuery);