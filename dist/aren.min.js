!function(a){function e(s,n,t){var l=n.children("ul"),o=n.children("a");l.length>0&&(l.addClass(s.cssClass.subMenu),n.addClass(s.cssClass.parent),l.is(":visible")?n.addClass(s.cssClass.expanded):n.addClass(s.cssClass.collapsed),o.after(s.markup.expander.replace("%s",s.cssClass.expander)),l.children("li").each(function(){e(s,a(this),++t)}))}function s(a,e){var s=e.siblings("ul"),n=e.parent();s.is(":visible")?(n.removeClass(a.expanded).addClass(a.collapsed),e.attr("aria-expanded","false")):(n.removeClass(a.collapsed).addClass(a.expanded),e.attr("aria-expanded","true"))}function n(e,s){var n=s.siblings("ul"),t=n.parent();n.is(":visible")?(t.removeClass(e.expanded).addClass(e.collapsed),s.attr("aria-expanded","false"),n.find("."+e.expanded).removeClass(e.expanded).addClass(e.collapsed).find("."+e.expander).attr("aria-expanded","false")):(t.removeClass(e.collapsed).addClass(e.expanded),t.siblings("."+e.expanded).each(function(s,n){a(n).removeClass(e.expanded).addClass(e.collapsed).find("."+e.expanded).removeClass(e.expanded).addClass(e.collapsed)}))}function t(a,e){return a.find("."+e.cssClass.breakout).width()}function l(a,e,s){s||(s="Don't call this twice without a uniqueId"),o[s]&&clearTimeout(o[s]),o[s]=setTimeout(a,e)}var o={},i=!1,c=0,r={init:function(o){var r={cssClass:{nav:"aren-nav",expander:"aren-expander",showNav:"aren-nav-show",collapsed:"aren-nav-collapsed",expanded:"aren-nav-expanded",parent:"aren-nav-parent",breakout:"aren-breakout",toggle:"aren-nav-toggle",toggleActive:"aren-toggle-active",subMenu:"aren-sub-menu"},markup:{expander:'<button class="%s" aria-haspopup="true" aria-expanded="false"></button>',breakout:'<div class="%s"></div>'},breakout:[{callback:{onResize:function(){},onDocumentClick:function(){},onNavClick:function(a){a.stopPropagation()},onExpanderClick:function(a,e,n){s(e,n)},onExpanderKeyDown:function(a,e,n){a=a||window.event;var t=a.keyCode;(13===t||32==t)&&s(e,n)},onToggleClick:function(e,s,n){var t=a(n.data("target"));t.hasClass(s.showNav)?t.removeClass(s.showNav):t.addClass(s.showNav),n.toggleClass(s.toggleActive)}}},{callback:{onResize:function(){},onDocumentClick:function(e,s){a("."+s.expanded).removeClass(s.expanded).find("."+s.expander).attr("aria-expanded","false")},onNavClick:function(a){a.stopPropagation()},onExpanderClick:function(a,e,s){n(e,s)},onExpanderKeyDown:function(a,e,s){a=a||window.event;var t=a.keyCode;(13===t||32===t)&&(a.preventDefault(),n(e,s))},onToggleClick:function(){}}}]};return o=a.extend(!0,{},r,o),this.each(function(){var s=a(this);s.addClass(o.cssClass.nav),s.children("ul").children("li").each(function(){e(o,a(this),0)}),s.append(o.markup.breakout.replace("%s",o.cssClass.breakout)),s.data("aren.settings",o),s.find("."+o.cssClass.expander).each(function(){a(this).data("aren.settings",o)}),i||(a(document).on("click.aren",function(a){o.breakout[t(s,o)].callback.onDocumentClick(a,o.cssClass)}).on("click.aren","."+o.cssClass.nav,function(e){var s=a(this),n=s.data("aren.settings");n.breakout[t(s,n)].callback.onNavClick(e,n.cssClass)}).on("click.aren","."+o.cssClass.expander,function(e){var s=a(this).data("aren.settings"),n=a(this).parents("."+s.cssClass.nav);s.breakout[t(n,o)].callback.onExpanderClick(e,s.cssClass,a(this))}).on("keydown.aren","."+o.cssClass.expander,function(e){var s=a(this).data("aren.settings"),n=a(this).parents("."+s.cssClass.nav);s.breakout[t(n,o)].callback.onExpanderKeyDown(e,s.cssClass,a(this))}).on("click.aren","."+o.cssClass.toggle,function(e){var s=a(a(this).attr("data-target")),n=s.data("aren.settings");n.breakout[t(s,n)].callback.onToggleClick(e,n.cssClass,a(this))}),a(window).on("resize.aren",function(){l(function(){c=t(s,o),o.breakout[c].callback.onResize(o.cssClass,s)},100,"aren")}),c=t(s,o),i=!0)})}};a.fn.aren=function(a){return r[a]?r[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?!1:r.init.apply(this,arguments)}}(jQuery);